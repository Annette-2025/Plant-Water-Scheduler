<!DOCTYPE html>
<html lang="en">
<head>
    <title>Plant List</title>
    <style>
        #myList {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 5px;
            padding: 5px 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
        }
        li:hover {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <center><h1>Plant List</h1></center>

    <!-- ðŸŒ± Input form -->
    <label>Plant Name: <input type="text" id="plant-name"></label><br>
    <label>Year: <input type="number" id="plant-year" min="2025" max="2025"></label><br>
    <label>Month: <input type="number" id="plant-month" min="1" max="12"></label><br>
    <label>Day: <input type="number" id="plant-day" min="1" max="31"></label><br><br>

    <button id="add-plant-btn" onclick="popup()">Add Plant</button><br><br>
    <button onclick="clearStorage()">Clear All</button><br><br>
    <a href="calendar.html">View Calendar</a><br>

    <ul id="myList"></ul>

    <script>
        let data = '{ "plants" : [] }';
        let getData = localStorage.getItem("plants");
        if (!getData) {
            localStorage.setItem("plants", data);
            getData = localStorage.getItem("plants");
        }
        const obj = JSON.parse(getData);
        const list = document.getElementById("myList");

        for (let i = 0; i < obj.plants.length; ++i) {
            let li = document.createElement('li');
            let cat = obj.plants[i].name + ", " + obj.plants[i].month + "/" + obj.plants[i].day + "/" + obj.plants[i].year;
            li.innerText = cat;
            list.appendChild(li);
        }

        function popup() {
            //load new data
            const raw = localStorage.getItem("plants");
            const obj = raw ? JSON.parse(raw) : { plants: [] };

            let name1 = document.getElementById("plant-name").value.trim();
            let year1 = document.getElementById("plant-year").value;
            let month1 = document.getElementById("plant-month").value;
            let day1 = document.getElementById("plant-day").value;

            if (!name1 || parseInt(year1) != 2025 || month1 < 1 || month1 > 12) return;

            let max = 31;
            if (month1 == 2) max = 28;
            else if ([4, 6, 9, 11].includes(parseInt(month1))) max = 30;
            if (day1 < 1 || day1 > max) return;

            const newObject = { name: name1, year: year1, month: month1, day: day1 };
            obj.plants.push(newObject);
            localStorage.setItem("plants", JSON.stringify(obj));
            update(name1 + ", " + month1 + "/" + day1 + "/" + year1);
        }

        function update(text) {
            let li = document.createElement('li');
            li.innerText = text;
            list.appendChild(li);
        }

        function clearStorage() {
            localStorage.removeItem("plants");
            location.reload();
        }
    </script>
</body>
</html>
